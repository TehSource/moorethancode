---
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.id },
	}));
}

const slugParam = Array.isArray(Astro.params.slug)
	? Astro.params.slug.join('/')
	: Astro.params.slug ?? '';
Astro.redirect(`/devlog/${slugParam}/`, 301);
---
